# Values for Infisical
infisical-standalone:
  infisical:
    replicaCount: 1
    kubeSecretRef: "infisical-secrets"
    extraEnv:
      - name: DB_CONNECTION_URI
        valueFrom:
          secretKeyRef:
            name: infisical-secrets
            key: DB_CONNECTION_URI
      - name: REDIS_URL
        valueFrom:
          secretKeyRef:
            name: infisical-secrets
            key: REDIS_URL
    service:
      type: ClusterIP
      annotations: {}
    
  ingress:
    enabled: true
    ingressClassName: nginx
    nginx:
      enabled: false
    hostName: infisical.buildin.group
    annotations:
      nginx.ingress.kubernetes.io/proxy-body-size: "100m"
      # Homepage automatic service discovery annotations
      gethomepage.dev/enabled: "true"
      gethomepage.dev/name: "Infisical"
      gethomepage.dev/description: "Secret Management Platform"
      gethomepage.dev/icon: "infisical.png"
      gethomepage.dev/group: "Security"
      gethomepage.dev/weight: "10"
    
  postgresql:
    enabled: true
    primary:
      persistence:
        size: 1Gi
    auth:
      username: infisical
      database: infisicalDB
      existingSecret: "infisical-secrets"
      secretKeys:
        userPasswordKey: "postgres-password"

  redis:
    enabled: true
    master:
      persistence:
        size: 1Gi
    auth:
      existingSecret: "infisical-secrets"
      existingSecretPasswordKey: "redis-password"